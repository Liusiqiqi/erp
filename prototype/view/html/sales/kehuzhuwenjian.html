<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>客户主文件设定</title>
    <link rel="stylesheet" type="text/css"
          href="../../js/extjs/resources/css/ext-all.css" />
    <script type="text/javascript" src="../../js/extjs/ext-all.js"></script>
    <script type="text/javascript" src="../../js/extjs/ext-lang-zh_CN.js"></script>
    <script>
        Ext.onReady(function(){
            Ext.BLANK_IMAGE_URL = "";
            Ext.QuickTips.init();
            windowst.show();
        });

        var fielmenu=new Ext.menu.Menu({
            items:[{text:'期初账款设定'},{text:'原厂物料设定'}]
        });
        var fielmenu2=new Ext.menu.Menu({
            items:[{text:'写信'},{text:'上网'},{text:'历史交易查询'},{text:'账额数据效验'},{text:'新增拜访记录'},{text:'授权用户查询'}]
        });

        var stroedt=Ext.create('Ext.data.Store', {
            model: 'User',
            fields:['name', 'dizhi','bianma', 'bianma','lianxi'],
            data:{'items':[
                { 'name': '10111',  "dizhi":"北京",  "bianma":"40016","lianxi":"李忠"  },
                { 'name': '10112',  "dizhi":"上海",  "bianma":"68016" ,"lianxi":"朱经理"},
                { 'name': '10113', "dizhi":"天津",  "bianma":"408973" ,"lianxi":"周总" },
                { 'name': '10114', "dizhi":"重庆", "bianma":"404567" ,"lianxi":"刘经理" }
            ]},
            proxy: {
                type: 'memory',
                reader: {
                    type: 'json',
                    root: 'items'
                }
            }
        });



        var filterPanel4=Ext.create('Ext.grid.Panel',{

            listeners:{
                containerdblclick: function(grid, e, eOpts){ //单击事件
                    grid.getStore().add({'name':'', 'dizhi':'','bianma':'','lianxi':''});

                },
                itemcontextmenu:function(){

                    e.preventDefault();
                    new Ext.menu.Menu({
                            items:[{
                                xtype: 'textfield',
                                text: 'Lost',
                                pressed: false,
                                handler:function(){
                                    alert();
                                }
                            },{
                                xtype: '',
                                text: '热身赛时尚',
                                pressed: false,
                                handler: function(){}
                            },{
                                xtype: '',
                                text: '閫夋嫨鏂规',
                                pressed: false,
                                menu:new Ext.menu.Menu({
                                    items:[{
                                        text:'棰勮鏂规',
                                        pressed: false
                                    }]
                                }),
                                handler: function(){}
                            },{
                                xtype: '',
                                text: '瀵煎嚭鑷矱xcel',
                                pressed: false,
                                handler: function(){}
                            },{
                                xtype: '',
                                text: '缃戞牸鎵撳嵃',
                                pressed: false,
                                handler: function(){}
                            }]
                        }

                    ).showAt(e.getXY());
                }
            },plugins: [
                Ext.create('Ext.grid.plugin.CellEditing', {
                    clicksToEdit: 1
                })
            ],
            columns: [
                { header: '地址编号',style:'color:blue',  dataIndex: 'dizhi',width: 120,editor: { xtype:'textfield',
                    listeners:{
                        focus:function(grid, e, eOpts){
                            windows2.show();
                        }

                    }
                } },
                { header: '地址', dataIndex: 'bianma' },
                { header: '邮政编码', dataIndex: 'lianxi' },
                { header: '联系人', dataIndex: 'lianxi'},
                { header: '联系人职称', dataIndex: 'lianxi' },
                { header: '联系电话', dataIndex: 'lianxi' },
                { header: '传真号码', dataIndex: 'lianxi' },
                { header: '行走路线', dataIndex: 'lianxi' },
                { header: '备注', dataIndex: 'lianxi' }
            ],
            height: 130,
            width:1490,
            autoScroll:false,

        })
        var filterPanel = Ext.create('Ext.panel.Panel', {
            bodyPadding: 5,
            height:'100%',
            width:'100%',
            layout:"column",
            baseCls:'x-plain',
            items:[
                {

                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '负责人',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'color:blue;margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '业务人员',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{

                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '联系人',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '税务登记号',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{

                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '电话一',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '资本额',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{

                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '电话二',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '行业别',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{

                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '电话三',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },
                { style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '电子邮件',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{

                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '移动电话',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '网址',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{

                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '银行账号',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '传真号码',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '开户银行',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                }],
        });

        var filterPanel3 = Ext.create('Ext.panel.Panel', {
            bodyPadding: 5,
            height:'100%',
            width:'100%',
            layout:"column",
            baseCls:'x-plain',
            items:[
                {
                    xtype:'label',
                    text:'额度设定',
                    style:'border-bottom:1px solid blue',
                },{
                    xtype:'label',
                    text:'账款信息',
                    margin:'0 210',
                    style:'border-bottom:1px solid blue;',
                },
               {

                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '账款额度',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '期初预收款',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                },{

                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '剩余额度',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '期初应收款',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                },{

                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '收款条件',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '期末预收款',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                },{

                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '每月结账日',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '期末应收款',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                },{
                    fieldLabel: '信用等级',
                    xtype:'combo',
                    name: 'tzfs',
                    width:250,
                    displayField: 'name',
                    labelWidth:90,
                    valueField: 'abbr',
                    store: Ext.create('Ext.data.Store', {
                        fields: ['abbr', 'name'],
                        data : [
                            {"abbr":"A", "name":"A"},
                            {"abbr":"B", "name":"B"},
                            {"abbr":"C", "name":"C"},
                            {"abbr":"D", "name":"D"},
                            {"abbr":"E", "name":"E"},
                            {"abbr":"F", "name":"F"}
                        ]
                    }),
                    value: 'A',
                    typeAhead: true,
                    mode: 'local',
                    triggerAction: 'all',
                    selectOnFocus:true,

                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '未开票金额',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                },
                {
                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '发票类型',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '预收账款科目',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                },{

                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '应收账款科目',
                    labelWidth: 90,
                    width:250,
                    anchor: '100%',
                }],
        });
        var filterPanel2 = Ext.create('Ext.panel.Panel', {
            bodyPadding: 5,
            height:'100%',
            width:'100%',
            layout:"column",
            baseCls:'x-plain',
            items:[{
                style:'margin-left:9px;',
                xtype: 'datefield',
                name: 'BillDate',
                fieldLabel: '最初销售出库日',
                width:251,
                labelWidth: 90,
                anchor: '100%',
            },{
                style:'margin-left:9px',
                xtype: 'textfield', //多行文本域
                name: 'huilv',
                fieldLabel: '折数%',
                labelWidth: 90,
                width:250,
                anchor: '100%',
            },{
                style:'margin-left:9px;',
                xtype: 'datefield',
                name: 'BillDate',
                fieldLabel: '最初销售退货日',
                width:251,
                labelWidth: 90,
                anchor: '100%',
            },{
                style:'margin-left:9px;',
                fieldLabel: '售价等级',
                xtype:'combo',
                name: 'tzfs',
                displayField: 'name',
                labelWidth:90,
                valueField: 'abbr',
                store: Ext.create('Ext.data.Store', {
                    fields: ['abbr', 'name'],
                    data : [
                        {"abbr":"建议售价", "name":"建议售价"},
                        {"abbr":"售价A", "name":"售价A"},
                        {"abbr":"售价B", "name":"售价B"},
                        {"abbr":"售价C", "name":"售价C"},
                        {"abbr":"售价D", "name":"售价D"},
                        {"abbr":"售价E", "name":"售价E"},

                    ]
                }),
                value: '建议售价',
                typeAhead: true,
                mode: 'local',
                triggerAction: 'all',
                selectOnFocus:true,

            },{
                style:'margin-left:9px;',
                xtype: 'datefield',
                name: 'BillDate',
                fieldLabel: '最近销售出库日',
                width:251,
                labelWidth: 90,
                anchor: '100%',
            },{ style:'margin-left:9px;',
                fieldLabel: '单价是否含税',
                xtype:'combo',
                name: 'tzfs',
                displayField: 'name',
                labelWidth:90,
                valueField: 'abbr',
                store: Ext.create('Ext.data.Store', {
                    fields: ['abbr', 'name'],
                    data : [
                        {"abbr":"含税", "name":"含税"},
                        {"abbr":"未税", "name":"未税"}

                    ]
                }),
                value: '含税',
                typeAhead: true,
                mode: 'local',
                triggerAction: 'all',
                selectOnFocus:true,

            },{
                style:'margin-left:9px;',
                xtype: 'datefield',
                name: 'BillDate',
                fieldLabel: '最近销售退货日',
                width:251,
                labelWidth: 90,
                anchor: '100%',
            },{
                style:'margin-left:9px',
                xtype: 'textfield', //多行文本域
                name: 'MoneyStyle',
                fieldLabel: '潜在客户编号',
                labelWidth: 90,
                width:250,
                anchor: '100%',
            },{
                style:'margin-left:9px;',
                xtype: 'datefield',
                name: 'BillDate',
                fieldLabel: '最近销售拜访日',
                width:251,
                labelWidth: 90,
                anchor: '100%',
            },{
                style:'margin-left:9px;',
                xtype: 'datefield',
                name: 'BillDate',
                fieldLabel: '预约拜访日',
                width:251,
                labelWidth: 90,
                anchor: '100%',
            },{
                style:'margin-left:9px;',
                xtype: 'datefield',
                name: 'BillDate',
                fieldLabel: '客户建立日期',
                width:251,
                labelWidth: 90,
                anchor: '100%',
            },{
                style:'margin-left:9px;',
                xtype: 'datefield',
                name: 'BillDate',
                fieldLabel: '终止交易日期',
                width:251,
                labelWidth: 90,
                anchor: '100%',
            }]
        });

        /*选项卡*/
        var  tableds=Ext.create('Ext.TabPanel',{
            width:"100%",
            height:300,
            autoScroll:true,
            bodyPadding: 5,
            items:[{title:'基本资料',autoScroll:true,items:[filterPanel]},{title:'销售信息',autoScroll:true,items:[filterPanel2]},{title:'收款信息',autoScroll:true,items:[filterPanel3]},{title:'地址',autoScroll:true,items:[filterPanel4]},{title:'其他',xtype:'textarea',name:'Remark',fieldLabel: '备注',labelWidth: 30,}],
        });
        /*上面*/
        var forms=Ext.create('Ext.form.Panel', {
            bodyPadding: 5,
            height:'100%',
            layout:"column",
            baseCls:'x-plain',
            items:[
               {
                    style:'color:blue;margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '客户编号',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'color:blue;margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '账款归属',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'color:blue;margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'MoneyStyle',
                    fieldLabel: '客户全称',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '类别',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '客户简称',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '地区',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '英文全称',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '币别',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },{
                    style:'margin-left:9px',
                    xtype: 'textfield', //多行文本域
                    name: 'huilv',
                    fieldLabel: '英文简称',
                    labelWidth: 70,
                    width:250,
                    anchor: '100%',
                },tableds
            ]



        });

        //winform窗口
        var windowst=new  Ext.Window({
            width:640,
            height:520,
            title:"客户主文件设定",
            closable:true,
            resizable:false, //设置是否可以改变大小
            draggable:true,
            anchor: '100%',
            items:[forms],
            bbar:[{xtype:"splitbutton",text:'设定',width:90,menu:fielmenu},
                {xtype:"splitbutton",text:'功能',width:90,menu:fielmenu2}],
        });

        var windows2=new  Ext.Window({
            width:400,
            height:300,
            title:"物料选择",
            closable:true,
            resizable:false, //设置是否可以改变大小
            draggable:true,
            closeAction:"hide",
        });

        function  afronction(){
            var song=Ext.encode(forms.getForm().getValues());
            Ext.Ajax.request(
                {
                    //被用来向服务器发起请求默认的url
                    url : "",
                    //请求时发送后台的参数,既可以是Json对象，也可以直接使用“name = value”形式的字符串
                    params :[{}],
                    //请求时使用的默认的http方法
                    method : "post",
                    //请求成功时回调函数
                    success : function() {
                        Ext.ux.Toast.msg("信息提示", "成功删除所选记录！");
                    },
                    //请求失败时回调函数
                    failure : function() {
                        Ext.ux.Toast.msg("信息提示", "信息删除出错，请联系管理员!");
                    }
                }
            );
            alert(song);// 序列化表单
        }

        function fromstrn(){
            //alert(Ext.encode(forms.getForm().getValues())); 序列化表单

            //var record=grids.getSelectionModel().getLastSelected(); //获取选中的一行对象

            //	var clikd=grids.getSelectionModel().getSelected();//获取选中的一行

            //	var selecto=grids.getSelectionModel().getSelection(); //选中多行 返回数组
            //for(var i=0;i<selecto.length;i++){
            //	selecto[i].get('name');
            //}


            //var cout=grids.getStore().getCount(); //获取grid行数

            //var name=record.get('name');//获取值

            //for(var i=0;i<grids.store.data.length;i++){
            //var grit=grids.store.getAt(i).data; //获取全部值
            //	alert(grit.bianma);
            //}
//	}

            //var arr=[]; //序列化表格
            //var sni=grids.store.data;
            //sni.each(function(record){
            //arr.push(record.data);
            //})
            //alert(Ext.encode(arr));
            //}

            //grid.getSelectionModel().selectRow(0);//默认选中第一行

            //grid.getView().refresh(); //刷新表格

            //grids.store.removeAll();//移除全部数据

            //grids.store.removeAt(0); //删除指定的行

            //var selecto=grids.getSelectionModel().getSelection(); selecto.length>0是选中的 判断是否选中一行

            //var selecto=grids.getSelectionModel().getSelection();
            //var ston=grids.getStore();
            //var selectData=selecto[0];
            //var datainded=ston.indexOf(selectData);
            //grids.store.removeAt(datainded); //删除选中行


//	var mosld=grids.getSelectionModel().getLastSelected();
//		mosld.set('name',123); //修改选中的列
//		mosld.commit();

        }
    </script>
</head>

<body>
</body>
</html>